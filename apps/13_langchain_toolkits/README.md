# LangChain Toolkits sample applications

This app demonstrates how to use LangChain Toolkits.

## Prerequisites

- Python 3.10 or later
- Azure OpenAI Service

## Overview

**What is [LangChain Tools/Toolkits](https://python.langchain.com/docs/integrations/tools/)**

Tools are utilities designed to be called by a model: their inputs are designed to be generated by models, and their outputs are designed to be passed back to models.

## Usage

1. Get Azure OpenAI Service API key
1. Copy [.env.template](../../.env.template) to `.env` in the same directory
1. Set credentials in `.env`
1. Run main.py

```shell
# Create a virtual environment
$ python -m venv .venv

# Activate the virtual environment
$ source .venv/bin/activate

# Install dependencies
$ pip install -r requirements.txt
```

### Examples

#### Playwright

##### [Playwright for Python](https://playwright.dev/python/docs/intro)

- [Test generator](https://playwright.dev/docs/codegen)

```shell
# Generate Python code from PlayWright
$ npx playwright codegen --target=python
```

##### [PlayWright Browser Toolkit](https://python.langchain.com/docs/integrations/tools/playwright/)

```shell
$ poetry run playwright install

$ poetry run python apps/13_langchain_toolkits/playwright_tool.py
```

Sample output:

```
/home/stakenaka/src/github.com/ks6088ts-labs/workshop-azure-openai/apps/13_langchain_toolkits/playwright_tool.py:7: LangChainDeprecationWarning: Importing PlayWrightBrowserToolkit from langchain.agents.agent_toolkits is deprecated. Please replace deprecated imports:

>> from langchain.agents.agent_toolkits import PlayWrightBrowserToolkit

with new imports of:

>> from langchain_community.agent_toolkits.playwright.toolkit import PlayWrightBrowserToolkit
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  from langchain.agents.agent_toolkits import PlayWrightBrowserToolkit
/home/stakenaka/src/github.com/ks6088ts-labs/workshop-azure-openai/apps/13_langchain_toolkits/playwright_tool.py:34: LangChainDeprecationWarning: The function `initialize_agent` was deprecated in LangChain 0.1.0 and will be removed in 1.0. Use Use new agent constructor methods like create_react_agent, create_json_agent, create_structured_chat_agent, etc. instead.
  agent_chain = initialize_agent(
/home/stakenaka/src/github.com/ks6088ts-labs/workshop-azure-openai/apps/13_langchain_toolkits/playwright_tool.py:40: LangChainDeprecationWarning: The method `Chain.arun` was deprecated in langchain 0.1.0 and will be removed in 1.0. Use ainvoke instead.
  result = await agent_chain.arun("Yahoo ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ã®ãƒˆãƒ¬ãƒ³ãƒ‰ä¸Šä½ 3 ä»¶ã‚’æ•™ãˆã¦")


> Entering new AgentExecutor chain...
Yahoo ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€ã¾ãšãã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

Action:
â€˜â€˜â€˜json
{
  "action": "navigate_browser",
  "action_input": "https://search.yahoo.co.jp/realtime"
}
â€˜â€˜â€˜
Observation: Navigating to https://search.yahoo.co.jp/realtime returned status code 200
Thought:Action:
â€˜â€˜â€˜json
{
  "action": "extract_text",
  "action_input": {}
}
â€˜â€˜â€˜

Observation: Yahoo!ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ æœ¬å½“ã®è‡ªåˆ†ãªã‚“ã¦ã€ãªã„ã€‚æ±æ´‹å“²å­¦ã«å­¦ã¶ã€Œè‡ªåˆ†ã‚‰ã—ã•ã€ å°é¢¨ãƒ»è±ªé›¨ç·¨ã§ã¯å¤§é›¨ã‹ã‚‰èº«ã‚’å®ˆã‚‹çŸ¥è­˜ã‚‚ã€‚ãƒ¤ãƒ•ãƒ¼é˜²ç½æ¨¡è©¦ã§å‚™ãˆã‚’ ã€Œã“ã“ã‚ã€ã¨ã€Œã‹ã‚‰ã ã€ã®ã‚®ãƒ¢ãƒ³ã«å¿œãˆã‚‹ã€Œã‚³ã‚³ã‚«ãƒ©å­¦åœ’ã€ é˜²ç½ã‚¯ã‚¤ã‚ºã§ã€å°é¢¨ã‚„å¤§é›¨ã«å‚™ãˆã¦æ­£ã—ã„çŸ¥è­˜ã‚’èº«ã«ã¤ã‘ã‚ˆã†ï¼ å°é¢¨11å·ã‚¢ã‚¸ã‚¢ç·Šæ€¥æ”¯æ´æ´»å‹•ã«å¯„ä»˜ã®ã”å”åŠ›ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ æœ€æ–°ç½å®³ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢æƒ…å ±ã‚’LINEã§å–å¾— ç”ŸæˆAIã§è‡ªå·±ç™ºè¦‹ï¼Ÿã€€LINEãƒ¤ãƒ•ãƒ¼ã®ã‚­ãƒ£ãƒªã‚¢æ•™è‚²ãƒ—ãƒ­ã‚°ãƒ©ãƒ  ã„ã–ã¨ã„ã†ã¨ãã€ã‚ã‚‹ã¨åŠ©ã‹ã‚‹ã€‚#ãŠãã‚‹é˜²ç½ ã€å›³è§£ã§ã‹ã‚“ãŸã‚“ã€‘ç½å®³ã”ã¨ã«å½¹ç«‹ã¤çŸ¥è­˜ãƒ»æ©Ÿèƒ½ã‚’è¦‹ã¦ã¿ã‚ˆã†ï¼ ã€2024å¹´10æœˆã‹ã‚‰ã€‘å…ç«¥æ‰‹å½“ã®å¯¾è±¡è€…æ‹¡å……ã€€å¤‰æ›´ç‚¹ã¯ï¼Ÿ ã€èƒ½ç™»åŠå³¶è±ªé›¨ç·Šæ€¥æ”¯æ´ã€‘ç”šå¤§ãªè¢«å®³ãŒå‡ºã¦ã„ã‚‹è¢«ç½åœ°ã«æ”¯æ´ã‚’ Yahoo! JAPAN ãƒ˜ãƒ«ãƒ— ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š IDã§ã‚‚ã£ã¨ä¾¿åˆ©ã« æ–°è¦å–å¾— ãƒ­ã‚°ã‚¤ãƒ³ ã€å¿…ãšã‚ãŸã‚‹ã€‘ãã˜å¼•ãã‚ã‚Šã¾ã™ JavaScriptãŒç„¡åŠ¹ã§ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§JavaScriptã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„ã€‚ è©³ã—ãã¯ JavaScriptã®è¨­å®šæ–¹æ³• ã‚’ã”è¦§ãã ã•ã„ã€‚ æ¤œç´¢ ãƒŸãƒ¥ãƒ¼ãƒˆã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆ æ€¥ä¸Šæ˜‡ãƒ¯ãƒ¼ãƒ‰ ã‚ã®åæ›²æ­Œã£ã¦â™ªãŠã­ã ã‚Šæ­Œè¬¡ç¥­ ãƒãƒ³ã‚³ãƒƒã‚¯ ä½ç”°å¯…å­ ä¼Šè—¤æ²™è‰ ãƒˆãƒ¬ãƒ³ãƒ‰ 9:50 æ›´æ–° 1 ä½ç”°å¯…å­ 2 å¤©ç©ºã®èŠ±å« 3 è»ã¯éš è”½ 4 è£é‡‘å†…é–£ 5 å‰¯æ¥­è§£ç¦ 6 çµµä¸–ç•Œç‰©èª 7 ã•ã‚ˆãƒ¼ãªã‚‰ã¾ãŸã„ã¤ã‹ 8 ä»‹è­·ä½“é¨“ 9 ãƒãƒ³ã‚³ãƒƒã‚¯ 10 åœ°ç„ã®é“ 11 è‡ªæ°‘ãƒ»éº»ç”Ÿå‰¯ç·è£ãŒé«˜å¸‚æ°æ”¯æŒã¸ 12 ä¼Šè—¤æ²™è‰ 13 å¾¡å¶½å±±å™´ç« 14 ãƒãƒƒã‚µãƒãƒ³ 15 ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ•ãƒ©ã‚¤ãƒ‡ãƒ¼ 16 å°å·å½©ä½³ã‚¢ãƒŠ 17 è™ã«ç¿¼æœ€çµ‚å› 18 ä¸‰å®…ã‚¢ãƒŠ 19 ä¸–ç•Œè¦³å…‰ã®æ—¥ 20 ã‚ã®åæ›²æ­Œã£ã¦â™ªãŠã­ã ã‚Šæ­Œè¬¡ç¥­ äººæ°—ãƒã‚¹ãƒˆ ã€Œã¾ã‚‹ã§æ±äº¬ã‚¿ãƒ¯ãƒ¼ã‚’æ¨ªã«å€’ã—ãŸã‚ˆã†ã€ ã€€ã€€ã€€ ãƒªãƒªãƒ¼ãƒ»ãƒ•ãƒ©ãƒ³ã‚­ãƒ¼æ°ãŒ ãƒ™ã‚¹ãƒˆã‚»ãƒ©ãƒ¼ã€æ±äº¬ã‚¿ãƒ¯ãƒ¼ã€ã§ ã“ã†å½¢å®¹ã—ãŸï¼œåŒ—ä¹å·å¸‚ã®ã‚·ãƒ³ãƒœãƒ«ï¼ã¨ã„ãˆã°ï¼Ÿ ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€ãƒ’ãƒ³ãƒˆã€‘ ãƒ»æ—¥æœ¬ã®ã¤ã‚Šæ©‹ã®å…ˆé§†ã‘ ãƒ»å»ºè¨­å½“æ™‚ã®ç§°å·ã€Œæ±æ´‹ä¸€ã®å¤¢ã®ã¤ã‚Šæ©‹ã€ ãƒ»è‹¥æ¾åŒºã¨æˆ¸ç•‘åŒºã‚’çµã¶èµ¤ã„æ©‹  æ­£è§£ã¯â€¦â€¦ è¿”ä¿¡æ•° 33 ãƒªãƒã‚¹ãƒˆæ•° 118 ã„ã„ã­æ•° 356 3æ™‚é–“å‰ ã‚¹ãƒãƒ³ã‚¸ã‚±ãƒ¼ã‚­ã‚’ä½¿ã†ãŠè“å­ã¯ä¸¸ã„ã‚±ãƒ¼ã‚­ã—ã‹çŸ¥ã‚‰ãªã‹ã£ãŸã‚“ã§ã™ãŒã€ã‚·ãƒ£ã‚¤ãƒ³ãƒã‚¹ã‚«ãƒƒãƒˆã‚±ãƒ¼ã‚­ã‚’ä½œã‚‹æ™‚ã«è‰²ã€…èª¿ã¹ã¦ã¿ã‚‹ã¨ã€å››è§’ã„ã‚±ãƒ¼ã‚­ã‚‚ã‚ã‚‹ã‚“ã§ã™ã­ã‡ğŸ¤”  ã¨ã„ã†ã“ã¨ã§ä»Šå›ã¯å››è§’ã„ã‚¹ãƒãƒ³ã‚¸ã‚±ãƒ¼ã‚­ã®ãƒ¬ã‚·ãƒ”ã‚’ç´¹ä»‹ã—ã¾ã™ğŸ˜†  ğŸ‘‡è©³ã—ã„ä½œã‚Šæ–¹ã¯ğŸ‘‡ bit.ly/3UgAMgc  #ãŠè“å­ä½œã‚Š #sweets è¿”ä¿¡æ•° 7 ãƒªãƒã‚¹ãƒˆæ•° 158 ã„ã„ã­æ•° 406 2æ™‚é–“å‰ ã‚³ã‚¢ã®ã‚¨ã‚´ã‚µåŠ›ãªã‚‰ã™ãè¦‹ã¤ã‘ã‚‹ã ã‚ã†ãªã¨æ€ã£ãŸã‚ˆã€‚ è©²å½“ã®ã¿ã‚“ãªã«å±Šãã¾ã™ã‚ˆã†ã«ã€‚ è¿”ä¿¡æ•° 1 ãƒªãƒã‚¹ãƒˆæ•° 158 ã„ã„ã­æ•° 860 9æ™‚é–“å‰ ç„¡è·ã®é–“ãªã«ã‚’ã—ã¦ãŸã‹ã¨ã„ã†ã¨æ¯æœã€æ•£æ­©ã—ã¦3æ™‚ã«ã¯ã¤ãã£ãŸãŠã‚„ã¤ã‚’é£Ÿã¹ã¦ã„ã¾ã—ãŸã€‚æœ‰é›£ã„ã“ã¨ã§ã™ã€‚ è¿”ä¿¡æ•° 2 ãƒªãƒã‚¹ãƒˆæ•° 123 ã„ã„ã­æ•° 3,164 12æ™‚é–“å‰ ä»Šæ—¥ã®ãƒ‘ã‚¹ã‚¿ãªã‚“ã‹ç¡¬ãã¦æŠ˜ã‚Šã«ãã„ãªã¨æ€ã£ãŸã‚‰èœç®¸ã‚‚ä¸€ç·’ã«æŠ˜ã£ã¦ãŸã€‚æœ€æ‚ªã™ãã‚‹ã€‚ è¿”ä¿¡æ•° 41 ãƒªãƒã‚¹ãƒˆæ•° 3,524 ã„ã„ã­æ•° 30,436 12æ™‚é–“å‰ ä»Šã¾ã§ã‚µãƒ–ã‚¹ã‚¯ã«ãªãã¦ã€ã¤ã„æœ€è¿‘ãƒ¬ãƒ³ã‚¿ãƒ«ã—ãŸã®ã«ä»Šæ—¥ã‹ã‚‰ãƒãƒˆãƒ•ãƒªã§é…ä¿¡ã«ãªã£ã¦ãŸğŸ˜­ğŸ˜­ğŸ˜­ è¿”ä¿¡æ•° 5 ãƒªãƒã‚¹ãƒˆæ•° 269 ã„ã„ã­æ•° 6,873 14æ™‚é–“å‰ ã‚„ã£ã±ã“ã‚Œä½•å›è¦‹ã¦ã‚‚æŒ‡ã•ã™ã¨ã“ãã“ã˜ã‚ƒãªã„ è¿”ä¿¡æ•° 1 ãƒªãƒã‚¹ãƒˆæ•° 203 ã„ã„ã­æ•° 1,431 15æ™‚é–“å‰ ã¾ã çŸ¥äº‹ã§ã„ãŸã„ã¨é§„ã€…ã‚’ã“ã­ã‚‹46æ­³å…ãŒã“ã¡ã‚‰ã€‚ è¿”ä¿¡æ•° 63 ãƒªãƒã‚¹ãƒˆæ•° 327 ã„ã„ã­æ•° 1,731 17æ™‚é–“å‰ ãŠã˜ã„ã¡ã‚ƒã‚“ã™ãã‚‹www è¿”ä¿¡æ•° 10 ãƒªãƒã‚¹ãƒˆæ•° 104 ã„ã„ã­æ•° 1,583 1æ—¥å‰ æœç€ã¦ã¦ã‚‚ã‚€ã¡ã‚€ã¡éš ã›ã¦ãªã„ã£ã¦è¨€ã‚ã‚ŒãŸ è¿”ä¿¡æ•° 29 ãƒªãƒã‚¹ãƒˆæ•° 133 ã„ã„ã­æ•° 4,211 14æ™‚é–“å‰ ã‚‚ã£ã¨è¦‹ã‚‹ é›»è»Šé…å»¶ ï¼ˆåœ¨æ¥ç·šã€ç§é‰„ã€åœ°ä¸‹é‰„ï¼‰ åŒ—æµ·é“ æ±åŒ— é–¢æ± ä¸­éƒ¨ è¿‘ç•¿ ä¸­å›½ å››å›½ ä¹å· æ±æ€¥ç”°åœ’éƒ½å¸‚ç·š éŠšå­é›»é‰„ç·š æ±æ­¦ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼ãƒ©ã‚¤ãƒ³ å…¨å›½ã®é‹è¡Œæƒ…å ±ï¼ˆYahoo!è·¯ç·šæƒ…å ±ï¼‰ ãƒŸãƒ¥ãƒ¼ãƒˆã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚»ãƒ³ã‚¿ãƒ¼ åˆ©ç”¨è¦ç´„ åºƒå‘Šã«ã¤ã„ã¦ æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ ãƒ˜ãƒ«ãƒ—ãƒ»ãŠå•ã„åˆã‚ã› ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ã®APIæä¾› Xï¼ˆæ—§Twitterï¼‰ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦ Copyright (C) 2024 LY Corporation. All Rights Reserved.
Thought:Action:
â€˜â€˜â€˜json
{
  "action": "Final Answer",
  "action_input": "Yahooãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ã®ãƒˆãƒ¬ãƒ³ãƒ‰ä¸Šä½3ä»¶ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š\n1. ä½ç”°å¯…å­\n2. å¤©ç©ºã®èŠ±å«\n3. è»ã¯éš è”½"
}
â€˜â€˜â€˜

> Finished chain.
Yahooãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ã®ãƒˆãƒ¬ãƒ³ãƒ‰ä¸Šä½3ä»¶ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š
1. ä½ç”°å¯…å­
2. å¤©ç©ºã®èŠ±å«
3. è»ã¯éš è”½
```

- [PlayWright Browser Toolkit ã§ Web ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è©¦ã—ã¦ã¿ãŸ](https://www.keywalker.co.jp/blog/playwright-browser-toolkit_web-scraping.html)
